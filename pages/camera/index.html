<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>動植物識別AR</title>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@5.1.0/dist/tf.min.js"></script>
  <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-troika-text/dist/aframe-troika-text.min.js"></script>
  <link rel="stylesheet" href="../assets/css/camera.css">
</head>

<body>
  <div id="startScreen">
    <h2>動植物識別AR</h2>
    <p>カメラへのアクセスを許可してください</p>
    <button id="startButton">開始</button>
  </div>

  <video id="webcam" autoplay playsinline muted></video>
  <canvas id="drawingCanvas"></canvas>

  <div id="controlPanel">
    <button id="predictButton" disabled>分類する</button>
    <button id="saveButton" disabled>登録する</button>
    <button id="clearButton">消去</button>
  </div>

  <div id="progressIndicator">
    <div>判定中...</div>
    <div id="progressText">0/0</div>
    <div class="progress-bar">
      <div class="progress-fill"></div>
    </div>
  </div>

  <div id="notificationMessage"></div>

  <a-scene embedded vr-mode-ui="enabled:false" ar-mode="false">
    <a-entity id="cameraRig" position="0 0 0">
      <a-entity id="mainCamera" camera look-controls position="0 1.6 0"></a-entity>
    </a-entity>

    <a-assets>
      <a-asset-item id="notojpFont" src="AR_fonts/MPLUSRounded1c-Black.ttf"></a-asset-item>
    </a-assets>

    <a-entity id="infoBubble" visible="false" scale="0.8 0.8 0.8" face-camera-full tail-update>
      <a-plane color="#8b5a2b" width="2.1" height="1.1" position="0 0 -0.005"
        material="shader: flat; opacity: 1"></a-plane>
      <a-plane color="#34495e" width="2.0" height="1.0" position="0 0 0" material="shader: flat; opacity: 1"></a-plane>
      <a-troika-text id="bubbleText" font="#notojpFont" value="ここに結果が表示されます" font-size="0.07" color="#FFFFFF"
        textAlign="center" position="0 0 0.01"></a-troika-text>
      <a-box id="tailBlack" color="#000000" depth="0.05" height="0.05" width="0.15" position="0 -0.575 0"
        visible="true"></a-box>
      <a-box id="tailWhite" color="#FFFFFF" depth="0.05" height="0.05" width="0.45" position="0 -0.525 0"
        visible="true"></a-box>
    </a-entity>
  </a-scene>
  <script src="../assets/js/camera.js"></script>
</body>

</html>